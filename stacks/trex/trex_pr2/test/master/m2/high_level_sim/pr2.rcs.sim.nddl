#include "TREX.nddl"
#include "rcs/exports.nddl"
#include "rcs/nav/exports.nddl"
#include "nav/exports.nddl"
#include "plugs/exports.nddl"

MoveBehavior driver = new MoveBehavior(Internal, false);
MoveBehavior doorman = new MoveBehavior(Internal, true);
Recharger recharger = new Recharger(Internal);
BaseState base_state = new BaseState(Internal);

Behavior::Active{
  eq(duration, 1);
  meets(Inactive s);

  bool should_abort;
  testLEQ(should_abort, start, 100);
  if(should_abort == true){
    eq(s.status, ABORTED);
  }
  else {
    eq(s.status, SUCCESS);
    if(object == recharger){}
    else{
      eq_map_pose_msg(s.object, object);
    }
  }
}

close();

// Intial position
fact(base_state.Holds f1);
f1.frame_id = "map";
f1.time_stamp = 0.0;
f1.x = 8.50;
f1.y = 3.00;
f1.z = 0.0;
f1.qx = 0.0;
f1.qy = 0.0;
f1.qz = 0.0;
f1.qw = 1.0;
