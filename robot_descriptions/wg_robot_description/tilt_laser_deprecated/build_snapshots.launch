<launch>

  <!-- Run this node if you want to aggregate laser_scans into a point cloud -->
  <node pkg="point_cloud_assembler" type="laser_scan_assembler_srv" output="screen"  name="laser_scan_assembler">
    <remap from="scan" to="tilt_scan"/>
    <param name="tf_cache_time_secs" type="double" value="10.0" />
    <param name="tf_extrap_limit" type="double" value="0.01" />
    <param name="max_scans" type="int" value="400" />
    <param name="ignore_laser_skew" type="bool" value="true" />
  </node>

  <!-- Run this node if you want to aggregate many point_clouds into one larger point cloud -->
  <node pkg="point_cloud_assembler" type="point_cloud_assembler_srv" output="screen"  name="point_cloud_assembler">
    <remap from="cloud_in" to="tilt_laser_cloud_filtered" />
    <param name="tf_cache_time_secs" type="double" value="10.0" />
    <param name="tf_extrap_limit" type="double" value="0.01" />
    <param name="max_scans" type="int" value="400" />
  </node>

  <!-- Run this node if you want clouds automatically published during laser shutter messages -->
          call 'point_cloud_assembler/build_cloud' to aggregate point clouds
          call 'point_cloud_assembler/build_cloud' to aggregate laser scans -->
  <node pkg="point_cloud_assembler" type="point_cloud_snapshotter" output="screen" name="snapshotter">
    <remap from="laser_scanner_signal" to="laser_tilt_controller/laser_scanner_signal"/>
    <remap from="build_cloud" to="point_cloud_assembler/build_cloud" />
    <remap from="full_cloud" to="snapshot_cloud" />
    <param name="fixed_frame" type="string" value="base_link" />
  </node>

</launch>
